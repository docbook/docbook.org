<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>DocBook V5.0</title><meta name="generator" content="DocBook XSL Stylesheets V1.69.1"><link rel="stylesheet" type="text/css" href="https://docbook.org/docs/howto/howto.css"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="article" lang="en"><div class="titlepage"><h1>DocBook V5.0</h1><h2>The Transition Guide</h2><h3>28&nbsp;December&nbsp;2005</h3><div class="metadata"><h4>This version:</h4><dl class="urilist"><dt><span>http://docbook.org/docs/howto/2005-12-28/</span> (<a href="https://docbook.org/docs/howto/2005-12-28/howto.html">HTML</a>, <a href="https://docbook.org/docs/howto/2005-12-28/howto.xml">XML</a>, <a href="https://docbook.org/docs/howto/2005-12-28/howto.pdf">PDF</a>)</dt></dl><h4>Latest version:</h4><dl class="urilist"><dt><span>http://docbook.org/docs/howto/</span> (<a href="https://docbook.org/docs/howto/">HTML</a>, <a href="https://docbook.org/docs/howto/howto.xml">XML</a>, <a href="https://docbook.org/docs/howto/howto.pdf">PDF</a>)</dt></dl><h4>Previous version:</h4><dl class="urilist"><dt><span>http://docbook.org/docs/howto/2005-10-27/</span> (<a href="https://docbook.org/docs/howto/2005-10-27/howto.html">HTML</a>, <a href="https://docbook.org/docs/howto/2005-10-27/howto.xml">XML</a>, <a href="https://docbook.org/docs/howto/2005-10-27/howto.pdf">PDF</a>)</dt></dl><h4>Authors:</h4><dl class="authorlist"><dt>Jirka Kosek, <code class="email">&lt;<a href="mailto:jirka@kosek.cz">jirka@kosek.cz</a>&gt;</code></dt><dt>Norman Walsh, <code class="email">&lt;<a href="mailto:ndw@nwalsh.com">ndw@nwalsh.com</a>&gt;</code></dt></dl></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#introduction">Introduction</a></span></dt><dd><dl><dt><span class="section"><a href="#introduction-ns">Finally in a namespace</a></span></dt><dt><span class="section"><a href="#introduction-rng">Relaxing with DocBook</a></span></dt><dt><span class="section"><a href="#introduction-why-to-switch">Why switch to DocBook V5.0?</a></span></dt><dt><span class="section"><a href="#introduction-schemas">Schema jungle</a></span></dt></dl></dd><dt><span class="section"><a href="#tools">Toolchain</a></span></dt><dd><dl><dt><span class="section"><a href="#editors">Editing DocBook V5.0</a></span></dt><dt><span class="section"><a href="#validators">Validating DocBook V5.0</a></span></dt><dt><span class="section"><a href="#processing">Processing DocBook V5.0</a></span></dt></dl></dd><dt><span class="section"><a href="#changes">Markup changes</a></span></dt><dd><dl><dt><span class="section"><a href="#changes-linking">Improved cross-referencing and linking</a></span></dt><dt><span class="section"><a href="#changes-renamed">Renamed elements</a></span></dt><dt><span class="section"><a href="#changes-removed">Removed elements</a></span></dt></dl></dd><dt><span class="section"><a href="#convert4to5">Converting DocBook V4.x documents to DocBook V5.0</a></span></dt><dd><dl><dt><span class="section"><a href="#entities">What About Entities?</a></span></dt></dl></dd><dt><span class="section"><a href="#customizations">Customizing DocBook V5.0</a></span></dt><dt><span class="section"><a href="#faq">FAQ</a></span></dt><dt><span class="bibliography"><a href="#references">Bibliography</a></span></dt></dl></div>


<p>This document is targeted at DocBook users who are considering
switching from DocBook V4.x to DocBook V5.0. It describes
differences between DocBook V4.x and V5.0 and provides some suggestions about
how to edit and process DocBook V5.0 documents. There is
also section devoted to conversion of legacy documents from DocBook
4.x to DocBook V5.0.</p>

<div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="introduction"></a>Introduction</h2></div></div></div>


<p>The differences between DocBook V4.x and V5.0 are quite radical in
some aspects, but the basic idea behind DocBook is still the same and
almost all element names are unchanged. Because of this it is very
easy to become familiar with DocBook V5.0 if you know any previous version of
DocBook. You can find complete list of changes in
[<span class="citation">DB5SPEC</span>], here we will discuss only the most
fundamental changes.</p>

<div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="introduction-ns"></a>Finally in a namespace</h3></div></div></div>


<p>All DocBook V5.0 elements are in the namespace
<code class="uri">http://docbook.org/ns/docbook</code>. <acronym class="acronym" title="Extensible Markup Language">XML</acronym> namespaces are used to distinguish
between different element sets. In the last few years, almost all new
XML grammars have used their own namespace. It is easy to
create compound documents that contain elements from different XML
vocabularies. DocBook V5.0 is following this design rule. Using
namespaces in your documents is very easy. Consider this
simple article marked up in DocBook V4.5:</p>

<pre class="programlisting">&lt;article&gt;
  &lt;title&gt;Sample article&lt;/title&gt;
  &lt;para&gt;This is a really short article.&lt;/para&gt;
&lt;/article&gt;</pre>

<p>The corresponding DocBook V5.0 article will look very similar:</p>

<pre class="programlisting">&lt;article xmlns="http://docbook.org/ns/docbook" &#8230;&gt;
  &lt;title&gt;Sample article&lt;/title&gt;
  &lt;para&gt;This is a really short article.&lt;/para&gt;
&lt;/article&gt;</pre>

<p>The only change is the addition of a default namespace declaration
(<code class="code">xmlns="http://docbook.org/ns/docbook"</code>) on the root
element. This declaration applies the namespace to the root element and
all nested elements. Each
element is now uniquely identified by its local name and namespace.</p>

<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
<p>The namespace name <code class="uri">http://docbook.org/ns/docbook</code> serves
only as an identifier. This resource is not fetched during processing
of DocBook documents and you are not required to have an Internet
connection during processing. If you access the namespace URI with a browser,
you will find a short explanatory document about the namespace. In the
future this document will probably conform to (some version of) RDDL
and provide pointers to related resources.</p>
</div>

</div>

<div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="introduction-rng"></a>Relaxing with DocBook</h3></div></div></div>


<p>For more then decade, the DocBook schema was defined using a
DTD. However DTDs have serious limitations and DocBook V5.0 is thus
defined using a very powerful schema language called RELAX NG. Thanks
to RELAX NG, it is now much easier to create customized versions of
DocBook and some content models are now cleaner and more
precise.</p>

<p>Using RELAX NG has an impact on the document prolog. The following
example shows the typical prolog of a DocBook V4.x document. The version of
the DocBook DTD (in this case 4.5) is indicated in the document type
declaration (!DOCTYPE) which points to a particular version of the
DTD.</p>

<div class="example"><a name="ex.docbook45"></a><p class="title"><b>Example&nbsp;1.&nbsp;DocBook V4.5 document</b></p><div class="example-contents">

<pre class="programlisting">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;!DOCTYPE article PUBLIC '-//OASIS//DTD DocBook XML V4.5//EN'
                         'http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd'&gt;
&lt;article lang="en"&gt;
  &lt;title&gt;Sample article&lt;/title&gt;
  &lt;para&gt;This is really very short article.&lt;/para&gt;
&lt;/article&gt;</pre>
</div></div><br class="example-break">

<p>In contrast, DocBook V5.0 does not depend on DTDs anymore. This
mean that there is no document type declaration and the version of DocBook
used is indicated with the <code class="sgmltag-attribute">version</code>
attribute instead.</p>

<div class="example"><a name="ex.docbook5"></a><p class="title"><b>Example&nbsp;2.&nbsp;DocBook V5.0 document</b></p><div class="example-contents">

<pre class="programlisting">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;article xmlns="http://docbook.org/ns/docbook" version="5.0" xml:lang="en"&gt;
  &lt;title&gt;Sample article&lt;/title&gt;
  &lt;para&gt;This is really very short article.&lt;/para&gt;
&lt;/article&gt;</pre>
</div></div><br class="example-break">

<p>As you can see, DocBook V5.0 is built on top of existing XML
standards as much as possible and the <code class="sgmltag-attribute">lang</code>
attribute is superseded by the standard <code class="sgmltag-attribute">xml:lang</code> attribute.</p>

<p>Another fundamental change here is that there is no direct indication
of the schema used. Later in this document, you will learn how you can
specify a schema to be used for document validation.</p>

<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
<p>Although using the RELAX NG schema with DocBook
V5.0 is recommended,
there are also DTD and W3C XML Schema versions available (see <a href="#schemas" title="Where to get the schemas">the section called &#8220;Where to get the schemas&#8221;</a>) to satisfy tools that do not yet support
RELAX NG.</p>
</div>

</div>

<div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="introduction-why-to-switch"></a>Why switch to DocBook V5.0?</h3></div></div></div>


<p>The simple answer is &#8220;<span class="quote">because DocBook V5.0 is the
future</span>&#8221;. Apart from this marketing blurb, there are also more
technical reasons:</p>

<div class="itemizedlist"><ul type="disc"><li>
<p><span class="emphasis"><em>DocBook V4.x is feature frozen.</em></span> At the time
of this writing DocBook V4.5 is the last version of DocBook in V4.x
series. Any new DocBook development, like the addition of new elements, will
be done in DocBook V5.0. It is only matter of time before useful, new
elements will be added into DocBook V5.0, but they are not likely to be
back ported
into DocBook V4.x. DocBook V4.x will be developed in a maintainance mode
and errata will be published if necessary. </p>
</li><li>
<p><span class="emphasis"><em>DocBook V5.0 offers new functionality.</em></span> Even
the current version of DocBook V5.0 provides significant improvements
over DocBook V4.x. For example there is general markup for annotations,
a new and flexible system for linking, &#8230;</p>
</li><li>
<p><span class="emphasis"><em>DocBook V5.0 is more extensible.</em></span> Having
DocBook V5.0 in a separate namespace allows you to easily mix DocBook
markup with other XML based languages like SVG, MathML, XHTML or even
FooBarML.</p>
</li><li>
<p><span class="emphasis"><em>DocBook V5.0 is easier to customize.</em></span> RELAX
NG offers many powerful constructs that make customizing
the existing DocBook schema very easy. Now it is much easier to create
customized DocBook version then before with DTDs.</p>
</li></ul></div>

</div>

<div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="introduction-schemas"></a>Schema jungle</h3></div></div></div>


<p>Schemas for DocBook V5.0 are available in several formats at
<a href="http://www.oasis-open.org/docbook/xml/5.0b1/" target="_top">http://www.oasis-open.org/docbook/xml/5.0b1/</a> (or the
mirror at <a href="https://docbook.org/xml/5.0b1/" target="_top">http://docbook.org/xml/5.0b1/</a>).
Only the RELAX NG schema is normative
and it is preferred over the other schema languages. However, for your
convenience there are also DTD and W3C XML Schema versions provided for DocBook
V5.0. But please note that neither DTDs nor XML schemas are able to
capture all the constraints of DocBook V5.0. This mean that a
document that validates against the DTD or XML schema is not necessarily
valid against RELAX NG schema and thus can't be considered a valid
DocBook V5.0 document.</p>

<p>DTD and W3C XML Schema versions of the DocBook V5.0 grammar are provided
as a convenience for users who want to use DocBook V5.0 with legacy tools
that don't support RELAX NG. Authors are encouraged to switch to RELAX
NG based tools as soon as possible, or at least to validate documents
against the RELAX NG schema before further processing.</p>

<div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="schemas"></a>Where to get the schemas</h4></div></div></div>


<p>The latest versions of schemas can be obtained from the
following locations:</p>

<div class="variablelist"><dl><dt><span class="term">RELAX NG schema</span></dt><dd><p><a href="http://www.oasis-open.org/docbook/xml/5.0b1/rng/docbook.rng" target="_top">http://www.oasis-open.org/docbook/xml/5.0b1/rng/docbook.rng</a></p></dd><dt><span class="term">RELAX NG schema in compact syntax</span></dt><dd><p><a href="http://www.oasis-open.org/docbook/xml/5.0b1/rng/docbook.rnc" target="_top">http://www.oasis-open.org/docbook/xml/5.0b1/rng/docbook.rnc</a></p></dd><dt><span class="term">DTD</span></dt><dd><p><a href="http://www.oasis-open.org/docbook/xml/5.0b1/dtd/docbook.dtd" target="_top">http://www.oasis-open.org/docbook/xml/5.0b1/dtd/docbook.dtd</a></p></dd><dt><span class="term">W3C XML Schema</span></dt><dd><p><a href="http://www.oasis-open.org/docbook/xml/5.0b1/xsd/docbook.xsd" target="_top">http://www.oasis-open.org/docbook/xml/5.0b1/xsd/docbook.xsd</a></p></dd></dl></div>

<p>These schemas are also available from the mirror at
<a href="https://docbook.org/xml/5.0b1/" target="_top">http://docbook.org/xml/5.0b1/</a>.</p>

</div>

<div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="docs"></a>DocBook documentation</h4></div></div></div>


<p>Detailed documentation about each DocBook V5.0 element is
presented in <a href="https://docbook.org/tdg5/en/html/pt02.html" target="_top">the reference part
of <em class="citetitle">DocBook: The Definitive Guide</em></a>.</p>

<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
<p>Other parts of the book have not yet been updated to reflect the
changes made in DocBook V5.0. Please do not be confused by
this.</p>
</div>

</div>

</div>

</div>

<div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tools"></a>Toolchain</h2></div></div></div>


<p>There are a lot of questions concerning tools that are able to
work with DocBook V5.0 documents. The aim of this sections is to
briefly describe the tools and procedures that should be used to edit and
process content stored in DocBook V5.0.</p>

<div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="editors"></a>Editing DocBook V5.0</h3></div></div></div>


<p>Because DocBook is an XML based format and XML is a text based format,
you can use any text editor to create and edit DocBook V5.0
documents. However using &#8220;<span class="quote">dumb</span>&#8221; editors like Notepad is
not very productive. You will do much more better if you use editor
that comes with some XML support. As there are DTD and W3C XML Schemas
available for DocBook V5.0, you can configure your favorite editor to
use these schemas. But as we said already, it is recommended that you use
the RELAX NG grammar with DocBook V5.0. The rest of this section contains
an overview of XML editors (listed in alphabetical order) that are known
to support
guided editing based on RELAX NG schema.</p>

<div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="editors-nxml"></a>Emacs and nXML</h4></div></div></div>


<p><a href="http://www.thaiopensource.com/nxml-mode/" target="_top">nXML
mode</a> is an addon for the <span class="application"><a href="http://www.gnu.org/software/emacs/emacs.html">GNU
Emacs</a></span> text editor. By installing nXML you can turn Emacs
into a very powerful XML editor which will offer guided editing and
validation of XML documents.</p>

<div class="figure"><a name="f.emacs"></a><p class="title"><b>Figure&nbsp;1.&nbsp;Emacs with nXML mode is providing guided editing and validation</b></p><div class="figure-contents">

<div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="100%"><tr><td><img src="images/emacs.png" width="100%" alt="Emacs with nXML mode is providing guided editing and validation"></td></tr></table></div>
</div></div><br class="figure-break">

<p>nXML uses special configuration file named
<code class="filename">schemas.xml</code> to associate schemas with XML
documents. Often you will find this file in the directory
<code class="filename">site-lisp/nxml/schema</code> inside the Emacs installation
directory. Adding the following line into the configuration file,
will associate DocBook V5.0 elements with the appropriate
schema:</p>

<pre class="programlisting">&lt;namespace ns="http://docbook.org/docbook-ng" uri="<em class="replaceable"><code>/path/to/</code></em>docbook.rnc"/&gt;</pre>

<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
<p>Please note that nXML ships with a file named
<code class="filename">docbook.rnc</code>. This file contains the RELAX NG grammar
for DocBook V4.x. Be sure that you associate DocBook V5.0 namespace
with the corresponding DocBook V5.0 grammar.</p>
</div>

<p>If you can't edit global <code class="filename">schemas.xml</code> file,
you can create this file in a directory with your document. nXML will
find associations placed here also. In this case you must create
complete configuration file like:</p>

<pre class="programlisting">&lt;locatingRules xmlns="http://thaiopensource.com/ns/locating-rules/1.0"&gt;
  &lt;namespace ns="http://docbook.org/docbook-ng" uri="<em class="replaceable"><code>/path/to/</code></em>docbook.rnc"/&gt;
&lt;/locatingRules&gt;</pre>

</div>

<div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="editors-oxygen"></a>oXygen</h4></div></div></div>


<p><span class="application"><a href="http://www.oxygenxml.com/">oXygen</a></span> is a feature
rich XML editor. It has built in support for many schema languages
including RELAX NG. If you want to smoothly edit and validate DocBook
5.0 documents you should associate DocBook namespace with the
corresponding schema. Go to
<span class="guimenu">Options</span> &#8594; <span class="guisubmenu">Preferences&#8230;</span> &#8594; <span class="guisubmenu">Editor</span> &#8594; <span class="guimenuitem">Default
Schema Associations</span>. Then click
<span class="guibutton">New</span> button to add new association. Type in the
DocBook namespace, RELAX NG compact syntax schema location and choose
appropriate type of schema and confirm it by pressing
<span class="guibutton">OK</span>.</p>

<div class="figure"><a name="f.oxygen"></a><p class="title"><b>Figure&nbsp;2.&nbsp;Adding new schema association in oXygen</b></p><div class="figure-contents">

<div class="mediaobject"><img src="images/oxygen1.png" alt="Adding new schema association in oXygen"></div>
</div></div><br class="figure-break">

<p>Because oXygen comes with some preconfigured associations for
DocBook V4.x, you must move your
newly added one to the top of the list
(using <span class="guibutton">Up</span> button). That way you will be able to use
oXygen with both DocBook V4.x and DocBook V5.0.</p>

<div class="figure"><a name="f.oxygen.assoc"></a><p class="title"><b>Figure&nbsp;3.&nbsp;DocBook V5.0 association must precede associations for DocBook V4.x</b></p><div class="figure-contents">

<div class="mediaobject"><img src="images/oxygen2.png" alt="DocBook V5.0 association must precede associations for DocBook V4.x"></div>
</div></div><br class="figure-break">

<p>Now you can close preference by clicking on
<span class="guibutton">OK</span> button.</p>

<div class="figure"><a name="f.oxygen.open5"></a><p class="title"><b>Figure&nbsp;4.&nbsp;DocBook V5.0 document opened in oXygen</b></p><div class="figure-contents">

<div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="100%"><tr><td><img src="images/oxygen3.png" width="100%" alt="DocBook V5.0 document opened in oXygen"></td></tr></table></div>
</div></div><br class="figure-break">

</div>

<div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="editors-xxe"></a>XML Mind XML editor</h4></div></div></div>


<p><span class="application"><a href="http://www.xmlmind.com/xmleditor/">XML
Mind XML editor</a></span> (XXE) is a visual validating XML editor that
provides word-processor like interface to users. It is available in
two versions&#8212;Standard and Professional. Standard version is free and
provides everything you need to edit DocBook V5.0 documents.</p>

<div class="figure"><a name="f.xmlmind"></a><p class="title"><b>Figure&nbsp;5.&nbsp;XML Mind XML Editor &#8211; feels almost like MS Word but real DocBook V5.0 markup is created</b></p><div class="figure-contents">

<div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="100%"><tr><td><img src="images/xxe.png" width="100%" alt="XML Mind XML Editor &#8211; feels almost like MS Word but real DocBook V5.0 markup is created"></td></tr></table></div>
</div></div><br class="figure-break">

<p>Since version 2.11, XXE comes with bundled DocBook V5.0
configuration. Unfortunately this configuration is not enabled by
default. You must copy content of the directory
<code class="filename"><em class="replaceable"><code>XXE_install_dir</code></em>/doc/rnsupport/config/docbook5/</code>
into
<code class="filename"><em class="replaceable"><code>XXE_install_dir</code></em>/addon/config/docbook5/</code>
in order to activate it. After restart of XXE you will be able to
create (template for article is provided) and edit DocBook V5.0
documents.</p>

<p>RELAX NG schema provided with XXE can be outdated. If you want
to use XXE with the latest schema just grab fresh copy of the
<code class="filename">docbook.rng</code> and copy it over
<code class="filename"><em class="replaceable"><code>XXE_install_dir</code></em>/addon/config/docbook5/docbook.rng</code>.</p>

</div>

</div>

<div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="validators"></a>Validating DocBook V5.0</h3></div></div></div>


<p>If you are not using RELAX NG based validating editor when you
are creating documents, it is highly recommended that you validate your
documents before processing them. Only after successful validation you can be
sure that your document is really DocBook V5.0 and that processing
tools will be able to process it correctly.</p>

<p>You can find list of RELAX NG validators at <a href="http://relaxng.org/#validators" target="_top">http://relaxng.org/#validators</a>. It is recommended to use
validators with support for embedded Schematron rules inside RELAX NG
schema. Schematron is a rule based validation language which is used
to impose additional constraints on DocBook document. Schematron rules
assert very subtle conditions which can not be expressed in a pure
RELAX NG.</p>

<p><span class="application"><a href="https://msv.dev.java.net/">Sun
Multi-Schema XML Validator (MSV)</a></span> is able to validate XML
document against RELAX NG and Schematron at the same time. To install
and use MSV follow these steps:</p>

<div class="procedure"><ol type="1"><li>
<p>Download file <code class="filename">relames.zip</code> from <a href="https://msv.dev.java.net/servlets/ProjectDocumentList?folderID=101" target="_top">https://msv.dev.java.net/servlets/ProjectDocumentList?folderID=101</a>.</p>
</li><li>
<p>Unpack the downloaded file into arbitrary directory.</p>
</li><li>
<p>Validate your document by using the following command:</p>
<pre class="screen"><span><strong class="command">java</strong></span> -Xss256K -jar <em class="replaceable"><code>/path/to/</code></em>relames.jar <em class="replaceable"><code>/path/to/</code></em>docbook.rng document.xml</pre>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
<p>Switch <code class="option">-Xss256K</code> is used to increase stack size
of Java virtual machine. This is necessary because DocBook schema is
quite large. If you get stack overflow errors from MSV, try to increase
this value. If you are not using Java implementation from Sun, please consult
documentation of your virtual machine to learn how to increase stack
size.</p>
</div>
</li></ol></div>

<p>There is also <a href="http://badame.vse.cz/docbookvalidator/" target="_top">on-line DocBook&nbsp;V5.0
validator</a> which is also using RELAX NG with embedded Schematron
for validation.</p>

</div>

<div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="processing"></a>Processing DocBook V5.0</h3></div></div></div>


<p>Part of DocBook's great success can be attributed to the
availability of free
tools that can be used to transform DocBook content into various
target formats including HTML and PDF. The DocBook XSL Stylesheets are
among the most popular tools.</p>

<div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="dbxsl"></a>DocBook XSL Stylesheets</h4></div></div></div>


<p>The DocBook stylesheets are written in a quite general way so
that they have always been able to process content written in
different versions of DocBook (for example 3.1 and 4.2). Recent
versions of the stylesheets are also able to process DocBook V5.0
albeit with some limitations.</p>

<p>You can process DocBook V5.0 documents with the DocBook XSL
stylesheets in exactly the same way as DocBook V4.x document. There is
no need for a new special software, you can stick to you preferred
XSLT processor, be it Saxon, xsltproc, Xalan or whatever else.</p>

<p>During document processing, the stylesheets are striping
namespaces from DocBook V5.0 in order to get document which will be
very similar to DocBook V4.x. This is necessary because from the XSLT
point of view elements from different namespaces are distinct and can
not be easily processed by the same set of templates. This process is
completely transparent to user. If you are processing DocBook V5.0
document with the stylesheets you will only see the following
additional message:</p>

<pre class="screen">Stripping NS from DocBook 5/NG document.
Processing stripped document.</pre>

<p>Although you can successfully use existing stylesheets to
process DocBook V5.0 there are some limitations. Some new features of
DocBook V5.0 would require very complex rewrite of the stylesheets in
order to support them. This is unlikely to happen because completely
new version of stylesheets is currently being written from
scratch. Examples of such unsupported features are:</p>

<div class="itemizedlist"><ul type="disc"><li><p>general annotations;</p></li><li><p>general XLink links on all elements;</p></li></ul></div>

<p>During namespace stripping, the base URI of the document is
lost. This means that in rare situations, relatively referenced
resources like images or programlistings can be processed incorrectly.
The stylesheets attempt to compensate for this problem, but it is
possible that there are corner cases where it will fail.</p>

</div>

<div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="dbxsl2"></a>XSLT 2.0 based reimplementation</h4></div></div></div>


<p>XSLT 1.0 is missing some important features and, to overcome this
limitation, the current DocBook XSL stylesheets use several
implementation-specific extensions.
Fortunately, authors of new XSLT version 2.0 were
listening to these limitations and XSLT 2.0 adds many new and
previously missing features into language. New XSLT 2.0 stylesheets
are being implemented to process DocBook V5.0 documents with all new
features.</p>

<p>Reimplementation of the stylesheets, and new functionalities of
XSLT 2.0, allowed developers to integrate many new features into the
stylesheets. Some of them are:</p>

<div class="itemizedlist"><ul type="disc"><li><p>seamless integration of profiling (conditional
documents) with external bibliographies and
glossaries;</p></li><li><p>no need for (most) external extensions;</p></li><li><p>internationalized indexes;</p></li><li><p>easy to customize titlepage templates;</p></li></ul></div>

<p>The disadvantage of XSLT 2.0 based stylesheets is
that it is not finished yet and that there are not very many XSLT 2.0
implementations on the market. Currently the stylesheets are
supporting only HTML and chunked HTML output. Other output formats are
planned but do not expect them very soon because of limited free time
of stylesheets developers.</p>

<p>But if you want to try the new stylesheets, of course you can. Just
grab snapshot of development version of the stylesheets from <a href="https://docbook.sourceforge.net/snapshots/docbook-xsl2-snapshot.zip" target="_top">http://docbook.sourceforge.net/snapshots/docbook-xsl2-snapshot.zip</a>
and unpack it somewhere. Then download and install Saxon&nbsp;8 from <a href="http://saxon.sf.net" target="_top">http://saxon.sf.net</a>.</p>

<p>To transform DocBook V5.0 document to a single HTML page you can
then use command:</p>

<pre class="screen"><span><strong class="command">java</strong></span> -jar <em class="replaceable"><code>/path/to/</code></em>saxon8.jar -o output.html document.xml <em class="replaceable"><code>/path/to/</code></em>docbook-xsl2-snapshot/html/docbook.xsl</pre>

<p>To transform DocBook V5.0 document to a set of chunked HTML pages you can
then use command:</p>

<pre class="screen"><span><strong class="command">java</strong></span> -jar <em class="replaceable"><code>/path/to/</code></em>saxon8.jar document.xml <em class="replaceable"><code>/path/to/</code></em>docbook-xsl2-snapshot/html/chunk.xsl</pre>

</div>

</div>

</div>

<div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="changes"></a>Markup changes</h2></div></div></div>


<p>You can find a complete list of changes in
[<span class="citation">DB5SPEC</span>]. This section shows the most common
markup changes between DocBook V4.x and V5.0 in several examples.</p>

<div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="changes-linking"></a>Improved cross-referencing and linking</h3></div></div></div>


<p>In DocBook V4.x attribute <code class="sgmltag-attribute">id</code> was
used to assign unique identifier to element. In DocBook V5.0 this
attribute is renamed to <code class="sgmltag-attribute">xml:id</code> in order
to comply to [<span class="citation">XMLID</span>].</p>

<p>Now you can use almost any inline element as a source of link,
not just <code class="sgmltag-element">xref</code> or <code class="sgmltag-element">link</code>. So the following DocBook
4.x content:</p> 

<pre class="programlisting">&lt;section id="dir"&gt;
  &lt;title&gt;DIR command&lt;/title&gt;
  &lt;para&gt;...&lt;/para&gt;
&lt;/section&gt;

&lt;section id="ls"&gt;
  &lt;title&gt;LS command&lt;/title&gt;
  &lt;para&gt;This command is synonymum for &lt;link linkend="dir"&gt;&lt;command&gt;DIR&lt;/command&gt;&lt;/link&gt; command.&lt;/para&gt;
&lt;/section&gt;</pre>

<p>will be written in DocBook V5.0 as:</p>

<pre class="programlisting">&lt;section xml:id="dir"&gt;
  &lt;title&gt;DIR command&lt;/title&gt;
  &lt;para&gt;...&lt;/para&gt;
&lt;/section&gt;

&lt;section xml:id="ls"&gt;
  &lt;title&gt;LS command&lt;/title&gt;
  &lt;para&gt;This command is synonymum for &lt;command linkend="dir"&gt;DIR&lt;/command&gt; command.&lt;/para&gt;
&lt;/section&gt;</pre>

<p>Attribute <code class="sgmltag-attribute">linkend</code> was added to all
inline elements together with <code class="sgmltag-attribute">href</code>
attribute from XLink namespace. This means that you can use any inline
element as a source of hypertext link. In order to use XLinks you have
to declare XLink namespace (most often on the root element of your
document):</p>

<pre class="programlisting">&lt;article xmlns="http://docbook.org/ns/docbook" 
         xmlns:xl="http://www.w3.org/1999/xlink" version="5.0"&gt;
  &lt;title&gt;Test article&lt;/title&gt;

  &lt;para&gt;&lt;application xl:href="http://www.gnu.org/software/emacs/emacs.html"&gt;Emacs&lt;/application&gt; 
    is my favourite text editor.&lt;/para&gt;
  &#8230;</pre>

<p>Element <code class="sgmltag-element">ulink</code> was completely removed from DocBook V5.0
in favor of XLink linking. Instead of DocBook V4.x <code class="sgmltag-element">ulink</code>
element:</p>

<pre class="programlisting">&lt;ulink url="http://docbook.org"&gt;DocBook site&lt;/ulink&gt;</pre>

<p>you can now use <code class="sgmltag-element">link</code></p>

<pre class="programlisting">&lt;link xl:href="https://docbook.org"&gt;DocBook site&lt;/link&gt;</pre>

<p>XLink links can contain a fragment identifier and you can even
use them instead of <code class="sgmltag-attribute">linkend</code> attributes to form
cross-references inside document:</p>

<pre class="programlisting">&lt;command xl:href="#dir"&gt;DIR&lt;/command&gt;</pre>

<p>However XLink links are not checked during validation, while <code class="sgmltag-attribute">xml:id</code>/<code class="sgmltag-attribute">linkend</code>
links are checked for ID/IDREF consistency. It depends on your needs
what approach to internal linking is more suitable for you.</p>

<p>One case where the XLink-based, fragment identifier scheme is
useful is when XInclude is being used. XML ID/IDREF links cannot span
XInclude boundaries.</p>
</div>

<div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="changes-renamed"></a>Renamed elements</h3></div></div></div>


<p>Some elements were renamed to better express their meaning or to
reduce total number of elements available in DocBook.</p>

<div class="table"><a name="t.renamed"></a><p class="title"><b>Table&nbsp;1.&nbsp;Renamed elements</b></p><div class="table-contents">

<table summary="Renamed elements" border="1"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th>Old name</th><th>New name</th></tr></thead><tbody><tr><td><code class="sgmltag-element">sgmltag</code></td><td><code class="sgmltag-element">tag</code></td></tr><tr><td><code class="sgmltag-element">bookinfo</code>, <code class="sgmltag-element">articleinfo</code>,
<code class="sgmltag-element">chapterinfo</code>, <code class="sgmltag-element">*info</code></td><td><code class="sgmltag-element">info</code></td></tr><tr><td><code class="sgmltag-element">authorblurb</code></td><td><code class="sgmltag-element">personblurb</code></td></tr><tr><td><code class="sgmltag-element">collabname</code>, <code class="sgmltag-element">corpauthor</code>,
<code class="sgmltag-element">corpcredit</code>, <code class="sgmltag-element">corpname</code></td><td><code class="sgmltag-element">orgname</code></td></tr><tr><td><code class="sgmltag-element">isbn</code>, <code class="sgmltag-element">issn</code>,
<code class="sgmltag-element">pubsnumber</code></td><td><code class="sgmltag-element">biblioid</code></td></tr><tr><td><code class="sgmltag-element">lot</code>, <code class="sgmltag-element">lotentry</code>, <code class="sgmltag-element">tocback</code>,
<code class="sgmltag-element">tocchap</code>, <code class="sgmltag-element">tocfront</code>, <code class="sgmltag-element">toclevel1</code>,
<code class="sgmltag-element">toclevel2</code>, <code class="sgmltag-element">toclevel3</code>, <code class="sgmltag-element">toclevel4</code>,
<code class="sgmltag-element">toclevel5</code>, <code class="sgmltag-element">tocpart</code></td><td><code class="sgmltag-element">tocdiv</code></td></tr><tr><td><code class="sgmltag-element">graphic</code>, <code class="sgmltag-element">graphicco</code>,
<code class="sgmltag-element">inlinegraphic</code>, <code class="sgmltag-element">mediaobjectco</code></td><td><code class="sgmltag-element">mediaobject</code> and <code class="sgmltag-element">inlinemediaobject</code></td></tr><tr><td><code class="sgmltag-element">ulink</code></td><td><code class="sgmltag-element">link</code></td></tr></tbody></table>
</div></div><br class="table-break">

</div>

<div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="changes-removed"></a>Removed elements</h3></div></div></div>


<p>The following elements were removed from DocBook V5.0 without any
suitable replacement: <code class="sgmltag-element">action</code>, <code class="sgmltag-element">beginpage</code>, <code class="sgmltag-element">highlights</code>,
<code class="sgmltag-element">interface</code>, <code class="sgmltag-element">invpartnumber</code>, <code class="sgmltag-element">medialabel</code>, <code class="sgmltag-element">modespec</code>,
<code class="sgmltag-element">structfield</code>, <code class="sgmltag-element">structname</code>.</p>

</div>

</div>

<div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="convert4to5"></a>Converting DocBook V4.x documents to DocBook V5.0</h2></div></div></div>


<p>The DocBook V5.0 schema ships with an XSLT 1.0 stylesheet that
is designed to transform valid DocBook V4.x documents to valid
DocBook V5.0 documents.</p>

<p>To convert your document, <code class="filename">doc.xml</code> in the
examples below, follow these steps:</p>

<div class="procedure"><ol type="1"><li>
<p>Check the validity of your DocBook XML V4.x document. The
conversion tool assumes that the input document is valid. If the input
document contains markup errors, the results will be unpredictable at
best.</p>
</li><li>
<p>Transform <code class="filename">doc.xml</code> to
<code class="filename">newdoc.xml</code> with the
<code class="filename">db4-upgrade.xsl</code> stylesheet included in the
DocBook V5.0 distribution that you are using.</p>
</li><li>
<p>Check the validity of your DocBook XML V5.0 document against
the DocBook V5.0 RELAX NG grammar.</p>
</li></ol></div>

<p>In the vast majority of cases, the resulting document should
be valid and your conversion process is finished.</p>

<p>If the document is not valid, please report the problem.
(Over time, we'll have more experience with the sorts of things
that can go wrong and we'll update this document to reflect that
experience.)</p>

<div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="entities"></a>What About Entities?</h3></div></div></div>


<p>Using XSLT to transform existing documents to DocBook V5.0 has
one potential disadvantage: it removes all entity references from 
your document.</p>

<p>If preserving entities is an important aspect of your production
work flow, you will have to engage in a semi-manual process to
preserve them.</p>

<div class="procedure"><ol type="1"><li>
<p>Open your existing document using your favorite editing tool.
You must use a tool that <span class="emphasis"><em>is not</em></span> XML-aware, or one
that allows you to edit markup &#8220;in the raw&#8221;.</p>
</li><li>
<p>Replace all occurrences of the entity references that you want
to preserve with some unique string. For example, if you want to preserve
&#8220;<code class="literal">&amp;Product;</code>&#8221; references, you could replace them
all with &#8220;<code class="literal">[[[Product]]]</code>&#8221; (assuming that the string
&#8220;[[[Product]]]&#8221; doesn't occur anywhere else in your document).</p>
</li><li>
<p>Copy the document type declaration off of your document and save
it some place. The document type declaration is everything from
&#8220;<code class="literal">&lt;!DOCTYPE</code>&#8221; to the closing &#8220;<code class="literal">]&gt;</code>&#8221;.
</p>
</li><li>
<p>Perform the conversion described in <a href="#convert4to5" title="Converting DocBook V4.x documents to DocBook V5.0">the section called &#8220;Converting DocBook V4.x documents to DocBook V5.0&#8221;</a>.
</p>
</li><li>
<p>Open the new document using your favorite editing tool. Replace
all occurrences of the unique string you used to save the entity references
with the corresponding entity references.</p>
</li><li>
<p>Paste the document type declaration that you saved onto the top
of your new document.</p>
</li><li>
<p>Remove the external identifier (the <code class="literal">PUBLIC</code>
and/or <code class="literal">SYSTEM</code> keywords) from the document type
declaration. A document that begins:</p>
<pre class="programlisting">&lt;!DOCTYPE book [
&lt;!ENTITY someEntity "some replacement text"&gt;
]&gt;</pre>
<p>is perfectly well-formed. If you don't remove the references to
the DTD, then your parser will likely try to validate against DocBook
V4.0 and that's not going to work. Alternatively, you could refer
to the DocBook V5.0 DTD.</p>
</li></ol></div>

<div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Tip</h3>
<p>Steps 2 and 5 from previous procedure can be automated using
<a href="https://docbook.sourceforge.net/outgoing/cloak" target="_top">cloak
script</a> by Michael Smith.</p>
</div>

<div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="extparsedentities"></a>External Parsed Entities</h4></div></div></div>


<p>External parsed entities, entities which load part of a document
from another file, are a special case. These can often be replaced
with XInclude elements.</p>

<p>The Perl script <code class="filename">db4-entities.pl</code>, also included
in the DocBook V5.0 distribution attempts to perform this replacement
for you. To use the script, perform the following steps:</p>

<div class="procedure"><ol type="1"><li>
<p>Process your document with <code class="filename">db4-entities.pl</code>.
The script expects a single filename and prints the XInclude version
on standard output.</p>
</li><li>
<p>Process the XInclude version as described in <a href="#convert4to5" title="Converting DocBook V4.x documents to DocBook V5.0">the section called &#8220;Converting DocBook V4.x documents to DocBook V5.0&#8221;</a>.
</p>
</li></ol></div>
</div>
</div>

</div>

<div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="customizations"></a>Customizing DocBook V5.0</h2></div></div></div>


<p>TBD</p>



</div>

<div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="faq"></a>FAQ</h2></div></div></div>


<div class="qandaset"><dl><dt>1.  <a href="#d4e439">Authoring</a></dt><dd><dl><dt>1.1. <a href="#faq-authoring-schema-association">How do I attach a schema to a DocBook V5.0 document when I do not
want to use DTDs and !DOCTYPE?</a></dt><dt>1.2. <a href="#faq-authoring-general-entities">How do I use entities like &amp;ndash; in
DocBook V5.0?</a></dt><dt>1.3. <a href="#faq-authoring-modularization">How to modularize documents?</a></dt></dl></dd><dt>2.  <a href="#d4e464">Stylesheets</a></dt><dd><dl><dt>2.1. <a href="#faq-stylesheets-future">Will be the current DocBook XSL stylesheets (XSLT 1.0 based
implementation) maintained and improved in the future if a new work on
a new XSLT 2.0 based implementation started already?</a></dt></dl></dd><dt>3.  <a href="#d4e472">Schema customizations</a></dt><dd><dl><dt>3.1. <a href="#faq-customization-mathml">How can I extend DocBook schema with MathML elements?</a></dt><dt>3.2. <a href="#faq-customization-svg">How can I extend DocBook schema with SVG elements?</a></dt><dt>3.3. <a href="#faq-customization-mathml-svg">Is it possible to use previous two customizations for MathML
and SVG together?</a></dt></dl></dd><dt>4.  <a href="#d4e529">Tool specific problems</a></dt><dd><dl><dt>4.1. <a href="#faq-tools-xmlspy-xmlid">I'm using Altova XMLSpy to validate DocBook V5.0 instances
against W3C XML Schema (docbook.xsd). XMLSpy
complains about undefined xml:id
attribute?</a></dt></dl></dd></dl><table border="0" summary="Q and A Set"><col align="left" width="1%"><tbody><tr class="qandadiv"><td align="left" valign="top" colspan="2"><h4 class="title"><a name="d4e439"></a>1. Authoring</h4></td></tr><tr class="toc"><td align="left" valign="top" colspan="2"><dl><dt>1.1. <a href="#faq-authoring-schema-association">How do I attach a schema to a DocBook V5.0 document when I do not
want to use DTDs and !DOCTYPE?</a></dt><dt>1.2. <a href="#faq-authoring-general-entities">How do I use entities like &amp;ndash; in
DocBook V5.0?</a></dt><dt>1.3. <a href="#faq-authoring-modularization">How to modularize documents?</a></dt></dl></td></tr>
<tr class="question"><td align="left" valign="top"><a name="faq-authoring-schema-association"></a><a name="d4e442"></a><b>1.1.</b></td><td align="left" valign="top"><p>How do I attach a schema to a DocBook V5.0 document when I do not
want to use DTDs and !DOCTYPE?</p></td></tr>
<tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>There is no standard way of associating a RELAX NG schema with a
document. Most tools provide some mechanism for performing this
association, consult the documentation for your application. In some
tools you must specify schema manually each time your want to
edit/process your document.</p></td></tr>

<tr class="question"><td align="left" valign="top"><a name="faq-authoring-general-entities"></a><a name="d4e447"></a><b>1.2.</b></td><td align="left" valign="top"><p>How do I use entities like <code class="sgmltag-genentity">&amp;ndash;</code> in
DocBook V5.0?</p></td></tr>
<tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Modern schema languages (including RELAX NG and W3X XML Schema)
do not provide any means to define entities that can be used for easier
typing of special characters. Some editors provide functions or
special toolbars that allow you to easily pick necessary character
and insert it into document as a raw Unicode character or a numeric
character reference.</p><p>Another possibility is to include entity definitions in the
prolog of your document. <a href="http://www.w3.org/2003/entities/" target="_top">Entity definition
files</a> are now maintained by W3C. You can reference definition
files with entity definitions you are interested in and then reference
imported entities. For example:</p><pre class="programlisting">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;!DOCTYPE article [
&lt;!ENTITY % isopub SYSTEM "http://www.w3.org/2003/entities/iso8879/isopub.ent"&gt;
%isopub;
]&gt;
&lt;article xmlns="http://docbook.org/ns/docbook" version="5.0"&gt;
&lt;title&gt;DocBook V5.0 &amp;ndash; the superb documentation format&lt;/title&gt;
&#8230;</pre></td></tr>

<tr class="question"><td align="left" valign="top"><a name="faq-authoring-modularization"></a><a name="d4e456"></a><b>1.3.</b></td><td align="left" valign="top"><p>How to modularize documents?</p></td></tr>
<tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>You can use <a href="http://www.w3.org/TR/xinclude/" target="_top">XInclude</a> for this
task. There are available alternative schemas for DocBook V5.0 that
contain XInclude elements. This is necessary to make some XML editors
happy. Name of these schemas ends with letters &#8220;<span class="quote">xi</span>&#8221;, e.g.
<code class="filename">docbookxi.rnc</code> instead of
<code class="filename">docbook.rnc</code>.</p></td></tr>
<tr class="qandadiv"><td align="left" valign="top" colspan="2"><h4 class="title"><a name="d4e464"></a>2. Stylesheets</h4></td></tr><tr class="toc"><td align="left" valign="top" colspan="2"><dl><dt>2.1. <a href="#faq-stylesheets-future">Will be the current DocBook XSL stylesheets (XSLT 1.0 based
implementation) maintained and improved in the future if a new work on
a new XSLT 2.0 based implementation started already?</a></dt></dl></td></tr>
<tr class="question"><td align="left" valign="top"><a name="faq-stylesheets-future"></a><a name="d4e467"></a><b>2.1.</b></td><td align="left" valign="top"><p>Will be the current DocBook XSL stylesheets (XSLT 1.0 based
implementation) maintained and improved in the future if a new work on
a new XSLT 2.0 based implementation started already?</p></td></tr>
<tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Yes, the current stylesheets (like 1.69.1) will be supported and
improved further because they are very widely deployed and work with
many existing XSLT processors.</p><p>Surely there will be point in a future when all new development
will be switched to XSLT 2.0 based implementation only. But this will
not happen before all features of the current stylesheets are
implemented in the new stylesheets and before there will be more than
one usable XSLT 2.0 processor.</p></td></tr>
<tr class="qandadiv"><td align="left" valign="top" colspan="2"><h4 class="title"><a name="d4e472"></a>3. Schema customizations</h4></td></tr><tr class="toc"><td align="left" valign="top" colspan="2"><dl><dt>3.1. <a href="#faq-customization-mathml">How can I extend DocBook schema with MathML elements?</a></dt><dt>3.2. <a href="#faq-customization-svg">How can I extend DocBook schema with SVG elements?</a></dt><dt>3.3. <a href="#faq-customization-mathml-svg">Is it possible to use previous two customizations for MathML
and SVG together?</a></dt></dl></td></tr>
<tr class="question"><td align="left" valign="top"><a name="faq-customization-mathml"></a><a name="d4e475"></a><b>3.1.</b></td><td align="left" valign="top"><p>How can I extend DocBook schema with MathML elements?</p></td></tr>
<tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Basic DocBook schema allows any elements from MathML namespace
to appear inside <code class="sgmltag-element">equation</code> element. This means that you can
validate DocBook+MathML document, but MathML content will be ignored
during the validation. You will also not be able to use guided editing
for MathML content.</p><p>If you need strict validation of MathML content or guided
editing for MathML, you can easily extend the base DocBook schema with
a MathML schema.</p><div class="procedure"><a name="d4e481"></a><p class="title"><b>Procedure&nbsp;1.&nbsp;Extending the DocBook schema with MathML schema</b></p><ol type="1"><li>
<p>Download MathML RELAX NG schema from <a href="http://yupotan.sppd.ne.jp/relax-ng/mml2.html" target="_top">http://yupotan.sppd.ne.jp/relax-ng/mml2.html</a> and unpack it
somewhere (e.g. into <code class="filename">mathml</code> subdirectory).</p>
</li><li>
<p>Create easy schema customization
<code class="filename">dbmathml.rnc</code>:</p>
<pre class="programlisting">namespace html = "http://www.w3.org/1999/xhtml"
namespace mml = "http://www.w3.org/1998/Math/MathML"
namespace db = "http://docbook.org/ns/docbook"

include "/path/to/docbook.rnc" {
  db._any.mml = external "mathml/mathml2.rnc"
  db._any =
    element * - (db:* | html:* | mml:*) {
      (attribute * { text }
       | text
       | db._any)*
    }
}</pre>
<p>Or alternatively you can use XML syntax of RELAX NG&#8212;<code class="filename">dbmathml.rng</code>:</p>
<pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;grammar xmlns="http://relaxng.org/ns/structure/1.0"&gt;

&lt;include href="/path/to/docbook.rng"&gt;
  &lt;define name="db._any.mml"&gt;
    &lt;externalRef href="mathml/mathml2.rng"/&gt;
  &lt;/define&gt;

  &lt;define name="db._any"&gt;
    &lt;element&gt;
      &lt;anyName&gt;
        &lt;except&gt;
          &lt;nsName ns="http://docbook.org/ns/docbook"/&gt;
          &lt;nsName ns="http://www.w3.org/1999/xhtml"/&gt;
          &lt;nsName ns="http://www.w3.org/1998/Math/MathML"/&gt;
        &lt;/except&gt;
      &lt;/anyName&gt;
      &lt;zeroOrMore&gt;
        &lt;choice&gt;
          &lt;attribute&gt;
            &lt;anyName/&gt;
          &lt;/attribute&gt;
          &lt;text/&gt;
          &lt;ref name="db._any"/&gt;
        &lt;/choice&gt;
      &lt;/zeroOrMore&gt;
    &lt;/element&gt;
  &lt;/define&gt;
&lt;/include&gt;

&lt;/grammar&gt;</pre>
</li><li>
<p>Now use the customized schema (<code class="filename">dbmathml.rnc</code>
or <code class="filename">dbmathml.rng</code>) instead of the original
DocBook schema.</p>
</li></ol></div></td></tr>

<tr class="question"><td align="left" valign="top"><a name="faq-customization-svg"></a><a name="d4e499"></a><b>3.2.</b></td><td align="left" valign="top"><p>How can I extend DocBook schema with SVG elements?</p></td></tr>
<tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>The situation is the same as with MathML support. You can use
any elements from the SVG namespace inside <code class="sgmltag-element">imageobject</code>
element.</p><div class="procedure"><a name="d4e504"></a><p class="title"><b>Procedure&nbsp;2.&nbsp;Extending the DocBook schema with SVG schema</b></p><ol type="1"><li>
<p>Download SVG RELAX NG schema from <a href="http://www.w3.org/Graphics/SVG/1.1/rng/rng.zip" target="_top">http://www.w3.org/Graphics/SVG/1.1/rng/rng.zip</a> and unpack it
somewhere (e.g. into <code class="filename">svg</code> subdirectory).</p>
</li><li>
<p>Create easy schema customization
<code class="filename">dbsvg.rnc</code>:</p>
<pre class="programlisting">namespace html = "http://www.w3.org/1999/xhtml"
namespace db = "http://docbook.org/ns/docbook"
namespace svg = "http://www.w3.org/2000/svg"

include "/path/to/docbook.rnc" {
  db._any.svg = external "svg/svg11.rnc"
  db._any =
    element * - (db:* | html:* | svg:*) {
      (attribute * { text }
       | text
       | db._any)*
    }
}</pre>
<p>Or alternatively you can use XML syntax of RELAX NG&#8212;<code class="filename">dbsvg.rng</code>:</p>
<pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;grammar xmlns="http://relaxng.org/ns/structure/1.0"&gt;

&lt;include href="/path/to/docbook.rng"&gt;
  &lt;define name="db._any.svg"&gt;
    &lt;externalRef href="svg/svg11.rng"/&gt;
  &lt;/define&gt;

  &lt;define name="db._any"&gt;
    &lt;element&gt;
      &lt;anyName&gt;
        &lt;except&gt;
          &lt;nsName ns="http://docbook.org/ns/docbook"/&gt;
          &lt;nsName ns="http://www.w3.org/1999/xhtml"/&gt;
          &lt;nsName ns="http://www.w3.org/2000/svg"/&gt;
        &lt;/except&gt;
      &lt;/anyName&gt;
      &lt;zeroOrMore&gt;
        &lt;choice&gt;
          &lt;attribute&gt;
            &lt;anyName/&gt;
          &lt;/attribute&gt;
          &lt;text/&gt;
          &lt;ref name="db._any"/&gt;
        &lt;/choice&gt;
      &lt;/zeroOrMore&gt;
    &lt;/element&gt;
  &lt;/define&gt;
&lt;/include&gt;

&lt;/grammar&gt;</pre>
</li><li>
<p>Now use the customized schema (<code class="filename">dbsvg.rnc</code>
or <code class="filename">dbsvg.rng</code>) instead of the original
DocBook schema.</p>
</li></ol></div></td></tr>

<tr class="question"><td align="left" valign="top"><a name="faq-customization-mathml-svg"></a><a name="d4e522"></a><b>3.3.</b></td><td align="left" valign="top"><p>Is it possible to use previous two customizations for MathML
and SVG together?</p></td></tr>
<tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Yes, you can create a special schema customization that combines
both MathML and SVG with the DocBook schema. In compact syntax, merged
schema is:</p><pre class="programlisting">namespace html = "http://www.w3.org/1999/xhtml"
namespace mml = "http://www.w3.org/1998/Math/MathML"
namespace db = "http://docbook.org/ns/docbook"
namespace svg = "http://www.w3.org/2000/svg"

include "/path/to/docbook.rnc" {
  db._any.mml = external "mahtml/mathml2.rnc"
  db._any.svg = external "svg/svg11.rnc"
  db._any =
    element * - (db:* | html:* | mml:* | svg:*) {
      (attribute * { text }
       | text
       | db._any)*
    }
}</pre><p>Or alternatively in full RELAX NG syntax:</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;grammar xmlns="http://relaxng.org/ns/structure/1.0"&gt;

&lt;include href="/path/to/docbook.rng"&gt;
  &lt;define name="db._any.mml"&gt;
    &lt;externalRef href="mathml/mathml2.rng"/&gt;
  &lt;/define&gt;

  &lt;define name="db._any.svg"&gt;
    &lt;externalRef href="svg/svg11.rng"/&gt;
  &lt;/define&gt;

  &lt;define name="db._any"&gt;
    &lt;element&gt;
      &lt;anyName&gt;
        &lt;except&gt;
          &lt;nsName ns="http://docbook.org/ns/docbook"/&gt;
          &lt;nsName ns="http://www.w3.org/1999/xhtml"/&gt;
          &lt;nsName ns="http://www.w3.org/1998/Math/MathML"/&gt;
          &lt;nsName ns="http://www.w3.org/2000/svg"/&gt;
        &lt;/except&gt;
      &lt;/anyName&gt;
      &lt;zeroOrMore&gt;
        &lt;choice&gt;
          &lt;attribute&gt;
            &lt;anyName/&gt;
          &lt;/attribute&gt;
          &lt;text/&gt;
          &lt;ref name="db._any"/&gt;
        &lt;/choice&gt;
      &lt;/zeroOrMore&gt;
    &lt;/element&gt;
  &lt;/define&gt;
&lt;/include&gt;

&lt;/grammar&gt;</pre></td></tr>
<tr class="qandadiv"><td align="left" valign="top" colspan="2"><h4 class="title"><a name="d4e529"></a>4. Tool specific problems</h4></td></tr><tr class="toc"><td align="left" valign="top" colspan="2"><dl><dt>4.1. <a href="#faq-tools-xmlspy-xmlid">I'm using Altova XMLSpy to validate DocBook V5.0 instances
against W3C XML Schema (docbook.xsd). XMLSpy
complains about undefined xml:id
attribute?</a></dt></dl></td></tr>
<tr class="question"><td align="left" valign="top"><a name="faq-tools-xmlspy-xmlid"></a><a name="d4e532"></a><b>4.1.</b></td><td align="left" valign="top"><p>I'm using Altova XMLSpy to validate DocBook V5.0 instances
against W3C XML Schema (<code class="filename">docbook.xsd</code>). XMLSpy
complains about undefined <code class="sgmltag-attribute">xml:id</code>
attribute?</p></td></tr>
<tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>XMLSpy always uses its own bundled version of
<code class="filename">xml.xsd</code> which unfortunately doesn't define <code class="sgmltag-attribute">xml:id</code> attribute. The bundled version of
<code class="filename">xml.xsd</code> is hardwired into the program and can not
be replaced by a newer version. To solve this problem you must upgrade
to version 2006 SP1.</p></td></tr>
</tbody></table></div>
</div>

<div class="bibliography"><div class="titlepage"><div><div><h2 class="title"><a name="references"></a>Bibliography</h2></div></div></div>

<div class="bibliomixed"><p class="bibliomixed">[<abbr class="abbrev">RNCTUT</abbr>] 

Clark, James &#8211; Cowan, John &#8211; MURATA, Makoto: <span class="title">RELAX NG Compact Syntax Tutorial</span>.
Working Draft, 26 March 2003. OASIS. <span class="bibliomisc"><a href="http://relaxng.org/compact-tutorial-20030326.html" target="_top">http://relaxng.org/compact-tutorial-20030326.html</a></span>
</p></div>

<div class="bibliomixed"><p class="bibliomixed">[<abbr class="abbrev">XMLID</abbr>] 

Marsh, Jonathan &#8211; 
Veillard, Daniel &#8211;
Walsh, Norman: <span class="title">xml:id Version 1.0</span>. W3C Recommendation, 9 September 2005. <span class="bibliomisc"><a href="http://www.w3.org/TR/xml-id/" target="_top">http://www.w3.org/TR/xml-id/</a></span>
</p></div>

<div class="bibliomixed"><p class="bibliomixed">[<abbr class="abbrev">DB5SPEC</abbr>] 

Norman, Walsh: <span class="title">The DocBook Schema</span>.
Working Draft 5.0a1, OASIS, 29 June 2005.
<span class="bibliomisc"><a href="http://www.docbook.org/specs/wd-docbook-docbook-5.0a1.html" target="_top">http://www.docbook.org/specs/wd-docbook-docbook-5.0a1.html</a></span>
</p></div>

</div>

</div></body></html>